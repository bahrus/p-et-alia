!function(){const t=/(\-\w)/g;class s{constructor(t,s,e,i,n=null,r=50){this.seed=t,this.match=s,this.notify=e,this.max=i,this.ignore=n,this.mutDebounce=r,this._inMutLoop=!1}init(){this.sync(),import("./NDAddMut.js").then(({addMutObs:t})=>{t(this.seed.parentElement,this)})}sibCheck(t,s){}sync(t=0){const s="function"==typeof this.match;this.matches=[];let e=this._sis?this.seed:this.seed.nextElementSibling;for(;null!==e;){if(null===this.ignore||!e.matches(this.ignore)){if((s?this.match(e):e.matches(this.match))&&(this.matches.push(e),++t>=this.max))return void this.notify(this);this.sibCheck(e,t)}e=e.nextElementSibling}this.notify(this)}disconnect(){this._mutObs.disconnect()}}const e="on",i="noblock",n="if",r="to",h="prop",a="val";function o(t,s){let e=t;return s.forEach(t=>{if(e)switch(typeof t){case"string":e=e[t];break;default:e=e[t[0]].apply(e,t[1])}}),e}class c extends(function(t){return class extends t{constructor(){super(...arguments),this.evCount={}}static get observedAttributes(){return[disabled]}to$(t){const s=t%2;return(t-s)/2+"-"+s}incAttr(t){const s=this.evCount;t in s?s[t]++:s[t]=0,this.attr("data-"+t,this.to$(s[t]))}de(t,s,e=!1){const i=t+(e?"":"-changed"),n=new CustomEvent(i,{detail:s,bubbles:!0,composed:!1});return this.dispatchEvent(n),this.incAttr(i),n}}}(hydrate(HTMLElement))){constructor(){super(),this._s=null,this._lastEvent=null}get on(){return this._on}set on(t){this.attr(e,t)}get to(){return this._to}set to(t){this.attr(r,t)}get noblock(){return this._noblock}set noblock(t){this.attr(i,t,"")}get if(){return this._if}set if(t){this.attr(n,t)}get prop(){return this._prop}set prop(t){switch(typeof t){case"symbol":this._prop=t;break;default:this.attr(h,t)}}get val(){return this._val}set val(t){this.attr(h,t)}static get observedAttributes(){return super.observedAttributes.concat([e,r,i,n,h,a])}getSplit(t){return"."===t?[]:t.split(".")}attributeChangedCallback(t,s,o){const c="_"+t;switch(t){case n:case e:case h:case a:case r:this[c]=o;break;case i:this[c]=null!==o}t===a&&null!==o&&(this._s=this.getSplit(o)),super.attributeChangedCallback(t,s,o)}getPreviousSib(){let t=this;for(;t&&t.tagName.startsWith("P-");)t=t.previousElementSibling;return null===t&&(t=this.parentElement),t}connectedCallback(){this.style.display="none",this.propUp([e,r,i,n,h,a]),this.init()}init(){this.attchEvListnrs(),this.doFake()}attchEvListnrs(){if(this._bndHndlEv)return;this._bndHndlEv=this._hndEv.bind(this);const t=this.getPreviousSib();if(!t)return;t.addEventListener(this._on,this._bndHndlEv);const s=t.getAttribute("disabled");null!==s&&(0===s.length||"1"===s?t.removeAttribute("disabled"):t.setAttribute("disabled",(parseInt(s)-1).toString()))}skI(){return this.hasAttribute("skip-init")}doFake(){if(!this._if&&!this.skI()){let t=this._lastEvent;t||(t={target:this.getPreviousSib(),isFake:!0}),this._hndEv&&this._hndEv(t)}}_hndEv(t){this.hasAttribute("debug"),t&&(t.stopPropagation&&!this._noblock&&t.stopPropagation(),this._if&&!t.target.matches(this._if)||(this._lastEvent=t,this.pass(t)))}$N(t,s){return null==t?s:t}valFromEvent(t){return null!==this._s?o(t,this._s):this.$N(o(t,["detail","value"]),o(t,["target","value"]))}setVal(t,s){this.commit(s,this.valFromEvent(t))}commit(s,e){if(void 0===e)return;let i=this._prop;if(void 0===i){const s=this.to.split("["),e=s.length;if(e>1){const n=s[e-1].replace("]","");(n.startsWith("-")||n.startsWith("data-"))&&(i=n.split("-").slice(1).join("-").replace(t,function(t){return t[1].toUpperCase()}))}}s[i]=e}detach(t){t.removeEventListener(this._on,this._bndHndlEv)}disconnectedCallback(){const t=this.getPreviousSib();t&&this._bndHndlEv&&this.detach(t)}}const l="m",u="from";!function(t){let s=t.is;customElements.get(s)?console.warn("Already registered "+s):customElements.define(s,t)}(class extends c{constructor(){super(...arguments),this._pdNavDown=null,this._m=1/0,this._iIP=!1}static get is(){return"p-d"}get m(){return this._m}set m(t){this.attr(l,t.toString())}get from(){return this._from}set from(t){this.attr(u,t)}static get observedAttributes(){return super.observedAttributes.concat([l,u])}pass(t){this._lastEvent=t,this.attr("pds","🌩️");const s=this.applyProps(this._pdNavDown);this.attr("pds","👂"),this.attr("mtch",s.toString())}getMatches(t){return t.matches}applyProps(t){if(this._iIP)return 0;const s=this.getMatches(t);return s.forEach(s=>{t._inMutLoop&&"1"!==s.dataset.__pdWIP||this.setVal(this._lastEvent,s)}),s.length}attributeChangedCallback(t,s,e){switch(t){case l:null!==e&&(this._m=parseInt(e));break;case u:this._from=e;break;default:super.attributeChangedCallback(t,s,e)}}newNavDown(){const t=this.applyProps.bind(this),e=void 0===this._from?this:this.closest(this._from);return new s(e,this.to,t,this.m)}connectedCallback(){this.propUp([l,u]),this.attr("pds","📞"),this.to||(this.to="*",this.m=1);const t=this.newNavDown();t.ignore="p-d,p-d-x,p-d-r,script",this._iIP=!0,t.init(),this._iIP=!1,this._pdNavDown=t,super.connectedCallback()}})}();